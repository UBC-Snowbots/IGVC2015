#AUTHOR: Vincent Yuan
#DATE: Jan 20,2015
#FUNCTION: Easy access to git commands 
#!/usr/bin/env python      
import Tkinter as tk    
import tkMessageBox
import os   

class Application(tk.Frame):              
    def __init__(self, master=None):
        tk.Frame.__init__(self, master)   
	os.system ("echo \n")
        self.grid(row = 1, column = 1, pady = 2, padx = 2)                       
        self.createWidgets()
    def createWidgets(self):
	self.instructions = tk.Label (self, text = "Here is a simple application to use git with, go through each box from top to bottom and you can back up your files easily. \n The '"'Enter'"' key does not work at the moment, please do not use. Press '"'Backspace'"' if accidentaly pressed '"'Enter'"'\n")
	self.instructions = self.instructions.grid (row = 0, column = 1, pady = 2, padx = 2)
	self.createDirectory()
	self.createFile()
	self.createMessage()
	self.createButtons()
    def createDirectory(self): 
	self.directory = tk.Text(self, height = 1, relief=tk.SUNKEN,borderwidth=2)
	self.directory.grid(row = 1, column = 1, pady = 1, padx = 2, sticky=tk.W+tk.E)
	self.dirLabel = tk.Label(self,text = "Directory Path:",anchor = tk.W,justify=tk.LEFT)
	self.directorybutton = tk.Button(self, text = '(1)Navigate to Directory', command = self.navigate,anchor = tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.directorybutton.grid(row = 1, column = 2,sticky=tk.W+tk.E)
	self.dirLabel.grid(row = 1, column = 0)
	#text box for directory 
	#git status button
	self.direxample = tk.Label(self, text = "Example: /home/vagrant/Desktop/Snowbots_ws",anchor = tk.W,justify=tk.LEFT)
	self.direxample = self.direxample.grid(row = 2, column = 1, pady = 1, padx = 2)
    def createFile(self):
	self.filel = tk.Text(self,height = 1,relief=tk.SUNKEN,borderwidth=2,width=20)
	self.filel.grid(row = 4, column = 1, pady = 10, padx = 2,sticky=tk.W+tk.E)
	self.fileLabel = tk.Label(self,text = "File To Save:",anchor = tk.W,justify=tk.LEFT)
	self.fileLabel.grid(row = 4, column = 0)
	#text box for file
	#git add button
	self.addButton = tk.Button(self, text='(3)Add Changes', command = self.changes,anchor = tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.addButton.grid(row = 4, column = 2,sticky=tk.W+tk.E)
	self.direxample = tk.Label(self, text = "Example: '"'gps.cpp'"', '"'README.txt'"'",anchor = tk.W,justify=tk.LEFT)
	self.direxample = self.direxample.grid(row = 5, column = 1, pady = 1, padx = 2)
    def createMessage(self):
	self.message = tk.Text(self,height = 1,relief=tk.SUNKEN,borderwidth=2)
	self.message.grid(row = 7, column = 1, pady = 10, padx = 2,sticky=tk.W+tk.E)
	self.mesLabel = tk.Label(self,text = "Commit Message:",anchor = tk.W,justify=tk.LEFT)
	self.mesLabel.grid(row = 7, column = 0)
	#text for commit message	
	#commit button
	self.commitbutton = tk.Button(self, text = '(5)Commit with message', command = self.git_commit,anchor = tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.commitbutton.grid(row = 7, column = 2,sticky=tk.W+tk.E)
	self.comexample = tk.Label(self, text = "Example: '"'I changed this file! -Jan 20, 2015'"' ",anchor = tk.W,justify=tk.LEFT)
	self.comexample = self.comexample.grid(row = 8, column = 1, pady = 1, padx = 2)
	
    def createButtons(self):
        self.quitButton = tk.Button(self, text='Quit', command=self.quit,anchor = tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)            
        self.quitButton.grid(row = 9, column = 2, pady = 10, padx = 5,sticky=tk.E) 
	#quit button           
	self.checkButton = tk.Button(self, text='(2)Check Status', command = self.check,anchor = tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.checkButton.grid(row = 9, column = 0, pady = 2, padx = 5,sticky=tk.W)
	self.branchButton = tk.Button(self, text='(4)Check Branch', command = self.branch,anchor =tk.W,justify = tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.branchButton.grid(row = 9, column = 1, pady = 2, padx = 5,sticky=tk.W)
	self.pushButton = tk.Button(self,text='Push Files',command = self.pushcommand,anchor=tk.W,justify=tk.LEFT,relief=tk.RAISED,borderwidth=2)
	self.pushButton.grid(row = 9, column = 2, pady = 2, padx =5, sticky = tk.W)
    def check(self):
	os.system ("git status")
    def branch(self):
	os.system ("git branch")
    def pushcommand(self):
	if tkMessageBox.askokcancel("PUSH CONFIRMATION","Have you checked your status for files added? \n Have you check your branch for where you are pushing? \n"):
		self.push()
    def push(self):
	os.system ("git push")
	os.system ("echo \n")
	os.system ("echo push is Complete, press quit to leave.\n")
    def changes(self):
	read = self.filel.get("1.0",'end-1c')
	output = "git add " + read
	os.system(output)
	output = "echo added " + read + " to list of files to commit \n"
	os.system(output)
    def git_commit(self):
	read1 = self.message.get("1.0",'end-1c')
	output1 = "git commit -m " + '"' + read1 + '"'
	os.system(output1) 
	os.system("echo \n")
	os.system("echo Commit complete, ready for push \n")
    def navigate(self):
	read = self.directory.get("1.0",'end-1c')
	os.chdir(read)
	os.system("ls")
	os.system("echo \n")




app = Application()                       
app.master.title('Easygit @Snowbots')    

app.mainloop()  
